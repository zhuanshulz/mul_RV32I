## BUG 日志

***20211027：***
    
    条件： carry out from lowerbits

    现象： 运算错误
    
    原因： carry out from lowerbits
    
    debug: add higher bits selfadd logic when lower bits carry out.

***20211028：***
    
    条件： x10 = 0xFF012300, x11 = 0xFF012303

    现象： 运算错误
    
    原因： 当x11的最低位为1时，需要将x10左移0位，送入低位的累加寄存器，并将x10右移32位并送入高位的累加寄存器。但是对于SLL, SRL, SRA来说， 其只使用rd寄存器的低五位完成移位，对于右移32位来说，rd目标寄存器的值为32，其二进制表示为0x0010_0000，其低五位全为0，执行的效果就变成了逻辑右移0位，进而出现了错误。
    
    debug: 将最低位的判断和运算单独从循环里提取出来单独执行。执行时不用逻辑移动，直接进行加法操作。

***20211028：***
    
    条件： 在asm中使用了sp（x2)寄存器

    现象： 返回C程序后调用子函数出错
    
    原因： 在asm中修改了sp，导致在调用子函数时数据进栈时数据地址没有对齐，进而报错。
    
    debug: 将asm中的使用的sp寄存器修改为其他寄存器使用。

***20211028：***
    
    条件： 返回C程序后调用子函数出错

    现象： 返回C程序后调用子函数出错
    
    原因： 汇编程序调用子函数时，没有保存现场和恢复现场。

    debug: 在子函数调用asm函数前进行现场保存，主要保存ra,s0,a0,a1这几个参数，然后在asm函数返回后对现场进行还原。

***20211028：***
    
    条件： random.random() in python3

    现象： 调用函数出错，找不到库。
    
    原因： import 模块名和python文件名一致，导致python不知道导入哪个文件。

    debug: 修改python文件名，不要与库模块名相同。

***20211028：***
    
    条件： 在指令数计算平均值时对每次新计算的结果和前面的平均值进行合并

    现象： 计算的平均值越来越小
    
    原因： 在进行除法时会损失精度，除法越多，误差越大。

    debug: 先对指令书进行求和，最后再计算总体的平均值。